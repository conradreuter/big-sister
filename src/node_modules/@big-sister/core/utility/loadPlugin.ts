import { ExtensionPlugin, SpyPlugin, StorePlugin } from '@big-sister'

/**
 * Load a plugin.
 */
export default function loadPlugin(name: string, type: 'spy'): SpyPlugin<any>
export default function loadPlugin(name: string, type: 'store'): StorePlugin<any>
export default function loadPlugin(name: string, type: 'extension'): ExtensionPlugin<any>
export default function loadPlugin(name: string, type: string): any {
  try {
    return require(`@big-sister/${type}-${name}`).default
  } catch {
    try {
      return require(name).default
    } catch {
      throw new Error(`Unable to find plugin '${name}'. Please make sure it is installed`)
    }
  }
}
